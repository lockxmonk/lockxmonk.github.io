<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  iOS - LZH007
  
  </title>
  
  
  <link href="atom.xml" rel="alternate" title="LZH007" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />
    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
  <script src="asset/highlightjs/highlight.pack.js"></script>
  <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
  function before_search(){
    var searchVal = 'site:lockxmonk.github.io ' + document.getElementById('search_input').value;
    document.getElementById('search_q').value = searchVal;
    return true;
  }
</script>
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>


  <section class="top-bar-section">
  <div class="row">
      <div style="position: relative;width:100%;"><div style="position: absolute; width:100%;">
        <ul id="main-menu" class="left">
        
        <li id=""><a target="self" href="index.html">Home</a></li>
        
        <li id=""><a target="_self" href="archives.html">Archives</a></li>
        
        </ul>

        <ul class="right" id="search-wrap">
          <li>
<form target="_blank" onsubmit="return before_search();" action="http://google.com/search" method="get">
    <input type="hidden" id="search_q" name="q" value="" />
    <input tabindex="1" type="search" id="search_input"  placeholder="Search"/>
</form>
</li>
          </ul>
      </div></div>
  </div>
  </section>

</nav>

        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; LZH007</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
       
       <li><a href="index.html">HOME</a></li>
    <li><a href="archives.html">Archives</a></li>
    <li><a href="about.html">ABOUT</a></li>

    <li><label>Categories</label></li>

        
            <li><a href="MAC%20OS.html">MAC OS</a></li>
        
            <li><a href="Effective%20OC2.0.html">Effective OC2.0</a></li>
        
            <li><a href="%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0.html">æœºå™¨å­¦ä¹ </a></li>
        
            <li><a href="%E5%9B%BE%E5%83%8F%E5%8E%BB%E9%9B%BE%E6%8A%80%E6%9C%AF.html">å›¾åƒå»é›¾æŠ€æœ¯</a></li>
        
            <li><a href="iOS.html">iOS</a></li>
        
            <li><a href="iOS%E4%B8%89%E6%96%B9%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0.html">iOSä¸‰æ–¹æ¡†æ¶æºç å­¦ä¹ </a></li>
        
            <li><a href="%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0.html">ç®—æ³•å­¦ä¹ </a></li>
         

      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>


        <section id="main-content" role="main" class="scroll-container">
        
       

 <script type="text/javascript">
	$(function(){
		$('#menu_item_index').addClass('is_active');
	});
</script>
<div class="row">
	<div class="large-8 medium-8 columns">
		<div class="markdown-body home-categories">
		
			<div class="article">
                <a class="clearlink" href="15391408783293.html">
                
                  <h1>UIStackViewçš„ç®€å•ä½¿ç”¨ä¸ç†è§£</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>ä¹‹å‰ä¸€ç›´åœ¨åæ§½iOSçš„å¸ƒå±€æ–¹å¼ï¼ˆframeå’Œautolayoutï¼‰ç›¸æ¯”å‰ç«¯çš„flexå¸ƒå±€æ–¹å¼å¾ˆè½åï¼Œä¹Ÿåœ¨æƒ³æœ‰æ²¡æœ‰å…¶å®ƒçš„æ–¹å¼æ¥æ”¹å–„ã€‚æœ€è¿‘å¶ç„¶å‘ç°UIStackViewçš„å­˜åœ¨ï¼ˆè‹¹æœçˆ¸çˆ¸åŸè°…æˆ‘ğŸ˜‚ï¼‰ï¼Œäº†è§£åå‘ç°å…¶ä¸­çš„ä½¿ç”¨ä¸å¸ƒå±€æ–¹å¼ç±»ä¼¼äºflexå¸ƒå±€ï¼Œæ„Ÿè§‰è¿™å°±æ˜¯è‹¹æœçˆ¸çˆ¸å€Ÿé‰´flexå¸ƒå±€ç‰¹ç‚¹æ‰€æ„é€ çš„ä¸€ç§å¸ƒå±€å®ç°æ–¹å¼å§ã€‚</p>

<h2 id="toc_0">å®ç°æ–¹å¼</h2>

<p>è¿™é‡Œæˆ‘ä»¬çœ‹ä¸€ä¸‹å¦‚ä½•ç®€å•çš„ä½¿ç”¨stackviewæ¥åˆ›é€ ä¸€ä¸ªæ‹¥æœ‰ä¼—å¤šå­itemçš„æ°´å¹³è§†å›¾ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code class="language-objc">- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    
    containerView = [[UIStackView alloc]initWithFrame:CGRectMake(0, 100, CGRectGetWidth(self.view.bounds), 200)];
    //å­è§†å›¾å¸ƒå±€æ–¹å‘ï¼šæ°´å¹³æˆ–å‚ç›´
    containerView.axis = UILayoutConstraintAxisHorizontal;//æ°´å¹³å¸ƒå±€
    //å­æ§ä»¶ä¾æ®ä½•ç§è§„çŸ©å¸ƒå±€
    containerView.distribution = UIStackViewDistributionFillEqually;//å­æ§ä»¶å‡åˆ†
    //å­æ§ä»¶ä¹‹é—´çš„æœ€å°é—´è·
    containerView.spacing = 10;
    //å­æ§ä»¶çš„å¯¹é½æ–¹å¼
    containerView.alignment = UIStackViewAlignmentFill;
    NSArray *tempArray = @[@&quot;1&quot;,@&quot;2&quot;,@&quot;3&quot;,@&quot;4&quot;];
    for (NSInteger i = 0; i &lt; 4; i++) {
//        UIView *view = [[UIView alloc]init];
        UILabel *label = [[UILabel alloc] init];
        label.textAlignment = NSTextAlignmentCenter;
        label.backgroundColor = [UIColor colorWithRed:random()%256/255.0 green:random()%256/255.0 blue:random()%256/255.0 alpha:1];
        label.numberOfLines = 0;
        label.text = tempArray[i];
        
        [containerView addArrangedSubview:label];
        
    }
    [self.view addSubview:containerView];
}
</code></pre>

<p>å¯ä»¥çœ‹åˆ°stackViewçš„ä½¿ç”¨å’Œviewæ²¡æœ‰å¤§çš„åŒºåˆ«ï¼Œä½¿ç”¨æ—¶æ ¹ç»éœ€è¦æ¥è®¾ç½®stackViewçš„<code>axisï¼ˆå¸ƒå±€æ–¹å‘ï¼‰</code>,<code>distributionï¼ˆå­æ§ä»¶ä¾æ®ä½•ç§è§„çŸ©å¸ƒå±€ï¼‰</code>,<code>spacingï¼ˆå­æ§ä»¶ä¹‹é—´çš„æœ€å°é—´è·ï¼‰</code>,<code>alignmentï¼ˆå­æ§ä»¶çš„å¯¹é½æ–¹å¼ï¼‰</code>ç­‰å±æ€§ã€‚</p>

<p>è¿™é‡Œè¯¦ç»†è¯´æ˜ä¸€ä¸‹ä¸ªå±æ€§çš„ä¸»è¦å‚æ•°ï¼š</p>

<p><strong>axisï¼š</strong><br/>
 å­æ§ä»¶çš„å¸ƒå±€æ–¹å‘ï¼Œæ°´å¹³ï¼ˆUILayoutConstraintAxisHorizontalï¼‰æˆ–å‚ç›´ï¼ˆUILayoutConstraintAxisVerticalï¼‰ï¼Œ è¿™ä¸ªä¸ç”¨è¿‡å¤šè§£é‡Šäº†</p>

<p><strong>UIStackViewDistributionï¼š</strong></p>

<pre><code>UIStackViewDistributionFill ï¼šå®ƒå°±æ˜¯å°† arrangedSubviews å¡«å……æ»¡æ•´ä¸ª StackView ï¼Œå¦‚æœè®¾ç½®äº†spacingï¼Œé‚£ä¹ˆè¿™äº› arrangedSubviews ä¹‹é—´çš„é—´è·å°±æ˜¯spacingã€‚å¦‚æœå‡å»æ‰€æœ‰çš„spacingï¼Œæ‰€æœ‰çš„ arrangedSubview çš„å›ºæœ‰å°ºå¯¸( intrinsicContentSize )ä¸èƒ½å¡«æ»¡æˆ–è€…è¶…å‡º StackView çš„å°ºå¯¸ï¼Œé‚£å°±ä¼šæŒ‰ç…§ Hugging æˆ–è€… CompressionResistance çš„ä¼˜å…ˆçº§æ¥æ‹‰ä¼¸æˆ–å‹ç¼©ä¸€äº› arrangedSubview ã€‚å¦‚æœå‡ºç°ä¼˜å…ˆçº§ç›¸åŒçš„æƒ…å†µï¼Œå°±æŒ‰æ’åˆ—é¡ºåºæ¥æ‹‰ä¼¸æˆ–å‹ç¼©ã€‚

UIStackViewDistributionFillEqually ï¼šè¿™ç§å°±æ˜¯ StackView çš„å°ºå¯¸å‡å»æ‰€æœ‰çš„spacingä¹‹åå‡åˆ†ç»™ arrangedSubviews ï¼Œæ¯ä¸ª arrangedSubview çš„å°ºå¯¸æ˜¯ç›¸åŒçš„ã€‚

UIStackViewDistributionFillProportionally ï¼šè¿™ç§è·ŸFillEquallyå·®ä¸å¤šï¼Œåªä¸è¿‡è¿™ä¸ªä¸æ˜¯è®²å°ºå¯¸å‡åˆ†ç»™ arrangedSubviews ï¼Œè€Œæ˜¯æ ¹æ® arrangedSubviews çš„ intrinsicContentSize æŒ‰æ¯”ä¾‹åˆ†é…ã€‚

UIStackViewDistributionEqualSpacing ï¼šè¿™ç§æ˜¯ä½¿ arrangedSubview ä¹‹é—´çš„spacingç›¸ç­‰ï¼Œä½†æ˜¯è¿™ä¸ªspacingæ˜¯æœ‰å¯èƒ½å¤§äº StackView æ‰€è®¾ç½®çš„spacingï¼Œä½†æ˜¯ç»å¯¹ä¸ä¼šå°äºã€‚è¿™ä¸ªç±»å‹çš„å¸ƒå±€å¯ä»¥è¿™æ ·ç†è§£ï¼Œå…ˆæŒ‰æ‰€æœ‰çš„ arrangedSubview çš„ intrinsicContentSize å¸ƒå±€ï¼Œç„¶åä½™ä¸‹çš„ç©ºé—´å‡åˆ†ä¸ºspacingï¼Œå¦‚æœå¤§çº¦ StackView è®¾ç½®çš„spacingé‚£è¿™æ ·å°±OKäº†ï¼Œå¦‚æœå°äºå°±æŒ‰ç…§ StackView è®¾ç½®çš„spacingï¼Œç„¶åæŒ‰ç…§ CompressionResistance çš„ä¼˜å…ˆçº§æ¥å‹ç¼©ä¸€ä¸ª arrangedSubview ã€‚

UIStackViewDistributionEqualCentering ï¼šè¿™ç§æ˜¯ä½¿ arrangedSubview çš„ä¸­å¿ƒç‚¹ä¹‹é—´çš„è·ç¦»ç›¸ç­‰ï¼Œè¿™æ ·æ²¡ä¸¤ä¸ª arrangedSubview ä¹‹é—´çš„spacingå°±æœ‰å¯èƒ½ä¸æ˜¯ç›¸ç­‰çš„ï¼Œä½†æ˜¯è¿™ä¸ªspacingä»ç„¶æ˜¯å¤§äºç­‰äº StackView è®¾ç½®çš„spacingçš„ï¼Œä¸ä¼šæ˜¯å°äºã€‚è¿™ä¸ªç±»å‹å¸ƒå±€ä»ç„¶æ˜¯å¦‚æœ StackView æœ‰å¤šä½™çš„ç©ºé—´ä¼šå‡åˆ†ç»™ arrangedSubviews ä¹‹é—´çš„spacingï¼Œå¦‚æœç©ºé—´ä¸å¤Ÿé‚£å°±æŒ‰ç…§ CompressionResistance çš„ä¼˜å…ˆçº§å‹ç¼© arrangedSubview ã€‚
</code></pre>

<p><strong>alignmentï¼š</strong></p>

<pre><code>UIStackViewAlignmentFill = é»˜è®¤æ–¹å¼ï¼Œ å¦‚æœå­æ§ä»¶æ°´å¹³å¸ƒå±€, åˆ™æŒ‡å­æ§ä»¶çš„å‚ç›´æ–¹å‘å¡«å……æ»¡stackView. åä¹‹äº¦ç„¶

UIStackViewAlignmentLeading = å¦‚æœå­æ§ä»¶ç«–ç›´å¸ƒå±€, åˆ™æŒ‡å­æ§ä»¶å·¦è¾¹å¯¹é½stackViewå·¦è¾¹. åä¹‹äº¦ç„¶, å³ UIStackViewAlignmentTop = UIStackViewAlignmentLeadingã€‚

UIStackViewAlignmentTop = UIStackViewAlignmentLeading,

UIStackViewAlignmentFirstBaseline = æ ¹æ®ä¸Šæ–¹åŸºçº¿å¸ƒå±€æ‰€æœ‰å­è§†å›¾çš„ y å€¼(é€‚ç”¨äº Horizontal æ¨¡å¼)

UIStackViewAlignmentLastBaseline = æ ¹æ®ä¸‹æ–¹åŸºçº¿å¸ƒå±€æ‰€æœ‰å­è§†å›¾çš„ y å€¼(é€‚ç”¨äº Horizontal æ¨¡å¼)

UIStackViewAlignmentCenter = ä¸­å¿ƒå¯¹é½

UIStackViewAlignmentTrailing = å¦‚æœå­æ§ä»¶ç«–ç›´å¸ƒå±€, åˆ™æŒ‡å­æ§ä»¶å·¦è¾¹å¯¹é½stackViewå³è¾¹. åä¹‹äº¦ç„¶, å³UIStackViewAlignmentBottom = UIStackViewAlignmentTrailing

UIStackViewAlignmentBottom = UIStackViewAlignmentTrailing
</code></pre>

<p>è¿™é‡Œè¿˜è¦è¯´æ˜å‡ ä¸ªæ–¹æ³•ï¼š<code>addArrangedSubview</code>ã€<code>removeArrangedSubview</code>å’Œ<code>insertArrangedSubview</code>ï¼Œæ—¥å¸¸viewçš„æ·»åŠ å’Œå­è§†å›¾ä»å¤è§†å›¾åˆ é™¤ä½¿ç”¨çš„æ˜¯<code>addSubview</code>å’Œ<code>removeFromSuperview</code>ã€‚</p>

<p>å…¶ä¸­å®Œæ•´æ–¹æ³•å¦‚ä¸‹ï¼š</p>

<pre><code class="language-objc">åˆå§‹åŒ–æ•°ç»„:
- (instancetype)initWithArrangedSubviews:(NSArray *)views;
æ·»åŠ å­è§†å›¾: 
- (void)addArrangedSubview:(UIView *)view;
ç§»é™¤å­è§†å›¾:
- (void)removeArrangedSubview:(UIView *)view;
æ ¹æ®ä¸‹æ ‡æ’å…¥è§†å›¾:
- (void)insertArrangedSubview:(UIView *)viewatIndex:(NSUInteger)stackIndex;
</code></pre>

<p><strong>æ³¨æ„</strong>ï¼š addArrangedSubview å’Œ insertArrangedSubviewï¼Œ ä¼šæŠŠå­æ§ä»¶åŠ åˆ°arrangedSubviewsæ•°ç»„çš„åŒæ—¶æ·»åŠ åˆ°StackViewçš„subViewæ•°ç»„ä¸­ï¼Œä½†æ˜¯removeArrangedSubviewï¼Œ åªä¼šæŠŠå­æ§ä»¶ä»arrangedSubviewsæ•°ç»„ä¸­ç§»é™¤ï¼Œä¸ä¼šä»subviewsä¸­ç§»é™¤ï¼Œå¦‚æœéœ€è¦è°ƒç”¨removeFromSuperview</p>

<p>è‹¥æˆ‘ä»¬éœ€è¦åˆ é™¤stackViewä¸­subViewæ•°ç»„çš„æœ€åä¸€ä¸ªè§†å›¾ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹æ–¹å¼ï¼š</p>

<pre><code class="language-objc">//removeArrangedSubviewï¼Œ åªä¼šæŠŠå­æ§ä»¶ä»arrangedSubviewsæ•°ç»„ä¸­ç§»é™¤ï¼Œ
//ä¸ä¼šä»subviewsä¸­ç§»é™¤ï¼Œå¦‚æœéœ€è¦å¯è°ƒç”¨removeFromSuperview
UIView *view = [_containerView.subviews lastObject];
[_containerView removeArrangedSubview:view];
[view removeFromSuperview];
</code></pre>

<p>åˆ°æ­¤stackViewçš„ä¸€ä¸ªç®€å•ä½¿ç”¨æ–¹å¼å°±çŸ¥é“äº†ã€‚</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2018/10/10</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='iOS.html'>iOS</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15153763176511.html">
                
                  <h1>KVOè‡ªå·±çš„ç†è§£</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<ol>
<li>KVOåˆ©ç”¨runtimeï¼Œç”Ÿæˆäº†ä¸€ä¸ªå¯¹è±¡çš„å­ç±»ï¼Œå¹¶ç”Ÿæˆå­ç±»å¯¹è±¡æ›¿æ¢åŸæ¥å¯¹è±¡çš„isaæŒ‡é’ˆï¼Œé‡å†™äº†setæ–¹æ³•ã€‚</li>
<li>KVOæ˜¯åŸºäºKVCçš„ï¼Œå¯ä»¥æ˜æ˜¾çš„å‘ç°åœ¨æ”¹å˜å®¹å™¨çš„æ—¶å€™ï¼Œé€šè¿‡KVCæ”¹å˜æ”¹å˜å®¹å™¨ä¸­çš„å€¼æˆ–è€…ä½¿ç”¨setæ–¹æ³•æ—¶ï¼Œä¼šè§¦å‘KVOé€šçŸ¥å‡½æ•°ï¼Œè€Œç®€å•çš„ä½¿ç”¨addObjectï¼šæ–¹æ³•æ—¶å´æ²¡æœ‰è§¦å‘ï¼Œè¿™æ˜¯å› ä¸ºKVOåªå“åº”setæ–¹æ³•ã€‚<font color=red>å¯ä»¥è¯´kvcæ˜¯kvoçš„å…¥å£</font></li>
<li>ç›´æ¥ä½¿ç”¨KVOåœ¨é¡¹ç›®ä¸­ä¸æ˜¯å¾ˆå¥½ç”¨ï¼Œä»£ç ç»“æ„æ¯”è¾ƒæ¾æ•£ï¼Œéœ€è¦è‡ªå·±å°è£…æˆ–ä½¿ç”¨å…¶å®ƒä¸‰æ–¹æ¡†æ¶ã€‚</li>
</ol>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2018/1/8</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='iOS.html'>iOS</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15151211562254.html">
                
                  <h1>AFNetworkingé‡åˆ°çš„é—®é¢˜</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>ç”±äº<code>AFNetworking</code>è¿ç”¨äº†å®˜æ–¹<code>NSURLSession</code>æ‰€ä»¥å…¶ä¸­æœ‰ä¸€äº›å‘</p>

<h2 id="toc_0">1.è‹¹æœè¿ç”¨NSJSONSerializationè§£æï¼Œå‡ºç°æ•°å­—ç±»å‹ç²¾åº¦é—®é¢˜</h2>

<p>å½“æœåŠ¡å™¨ç»™æˆ‘ä¼ å›æ¥ä¸€ä¸ª<code>3.0</code>çš„æ•°å­—ç±»å‹æ—¶ï¼Œåœ¨å®‰å“ç«¯æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯åœ¨iOSè¿™é‡Œä¼šå‡ºç°<code>2.99999</code>è¿™æ ·çš„é—®é¢˜ã€‚</p>

<p><font color=red><strong>å‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯ï¼šè‹¹æœåœ¨jsonè§£ææ—¶ï¼Œé»˜è®¤ä¸ºåŒç²¾åº¦çš„doubleç±»å‹ã€‚</strong></font></p>

<pre><code>æˆ‘ä»¬ç›¸å¤„çš„è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼š
1. è·Ÿåå°åå•†å°†æ•°å­—å‹çš„å€¼æ”¹ä¸º`å­—ç¬¦å‹`
2. ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„jsonè§£æã€‚
</code></pre>

<p>æœ€åæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ç¬¬ä¸€ç§æ–¹æ³•ï¼Œå› ä¸ºç¬¬äºŒç§åŠ¿å¿…è¦ä¿®æ”¹äº†AFNetworkçš„æºç ï¼Œå¼€å‘ä¸ç»´æŠ¤æˆæœ¬ç›¸æ¯”è¾ƒæ¥è¯´è¦å¤§ã€‚</p>

<h2 id="toc_1">2.jsonè§£æå¤±è´¥</h2>

<p>ç”±äºAFé»˜è®¤çš„è§£ææ–¹å¼ä¸º<code>0</code>ï¼ˆè¿”å›çš„å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œ<code>NSDictionary</code>æˆ–<code>NSArray</code>ï¼‰ï¼š<br/>
<img src="media/15151211562254/15151222443779.jpg" alt=""/></p>

<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹éƒ½æœ‰ä»€ä¹ˆé€‰é¡¹ï¼š<br/>
<img src="media/15151211562254/15151222806031.jpg" alt=""/></p>

<p>æ‰€ä»¥å½“æˆ‘ä»¬æœåŠ¡å™¨è¿”å›çš„jsonæ•°æ®æ˜¯<strong>ç¢ç‰‡åŒ–</strong>çš„ï¼ˆæœ€å¤–å±‚æ—¢ä¸æ˜¯<code>NSArray</code>ä¹Ÿä¸æ˜¯<code>NSDictionary</code>ï¼‰ï¼Œé‚£ä¹ˆè§£æçš„æ—¶å€™å°±ä¼šå‡ºé”™äº†ã€‚</p>

<p>è§£å†³æ–¹æ³•æ˜¯ï¼š</p>

<p><img src="media/15151211562254/15151327758647.jpg" alt=""/><br/>
åœ¨0åæ·»åŠ <code>|</code>å­—ç¬¦ï¼Œå¢åŠ è¿™ç§æƒ…å†µï¼Œå…è®¸ç¢ç‰‡åŒ–æ•°æ®ã€‚</p>

<h2 id="toc_2">3. è¯·æ±‚åresponseçš„çŠ¶æ€ç èŒƒå›´é—®é¢˜</h2>

<p>æ­£å¸¸é¡¹ç›®ä¸­æ­£å¸¸è¯·æ±‚æˆåŠŸä¼šè¿”å›200ï¼Œä½†æ˜¯æœåŠ¡å™¨è‹¥æ˜¯ç»™ä½ è¿”å›äº†500ï¼ˆæˆ‘ä¸çŸ¥é“åå°ä¸ºå•¥ä¼šè¿”å›è¿™ä¸ªç ï¼‰ï¼Œé—®é¢˜å°±å‡ºç°äº†ï¼š</p>

<p>è¿™æ˜¯ç”±äºä¸‹é¢çš„åŸå› ï¼š<br/>
<img src="media/15151211562254/15151343155944.jpg" alt=""/><br/>
ä¼šå‘ç°ä¸Šå›¾ä¸­å¯æ¥å—çŠ¶æ€ç çš„èŒƒå›´æ˜¯200-300ï¼›</p>

<p>å…·ä½“è§£å†³æ–¹æ³•å°±ä¸è¯´äº†ã€‚ã€‚ã€‚</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2018/1/5</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='iOS.html'>iOS</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15109904843500.html">
                
                  <h1>AFNetworkingçš„ç®€å•ä½¿ç”¨</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>æœ€è¿‘çœ‹å­¦ä¹ ä¸€äº›é¡¹ç›®ä»£ç åˆ°äº†ä½¿ç”¨<code>AFNetworking</code>çš„é¡¹ç›®ï¼Œæ‰€ä»¥å»å­¦ä¹ äº†ä¸€ä¸‹ï¼Œè¿™é‡Œç®€å•çš„æ€»ç»“ä¸€ä¸‹ï¼Œ<code>AFNetworking</code>çš„ä½¿ç”¨æ–¹æ³•ã€‚</p>

<h2 id="toc_0">AFNetworkingç®€ä»‹</h2>

<p><code>AFNetworking</code>æ˜¯ä¸€ä¸ªå¾ˆå—å¤§ä¼—æ¬¢è¿çš„ç½‘ç»œæ¡†æ¶ï¼Œå¯ä»¥å¸®åŠ©ç®¡ç†å’Œå¤„ç†ç½‘ç»œä»»åŠ¡è¯·æ±‚ï¼ŒåŒ…æ‹¬ä¸‹è½½ã€ä¸Šä¼ ã€<code>get</code>ã€<code>post</code>è¯·æ±‚ç­‰ã€‚</p>

<h2 id="toc_1">å®‰è£…</h2>

<p><code>AFNetworking</code>çš„å®‰è£…å¯ä»¥ä½¿ç”¨<code>CocoaPods</code>åœ¨æ–‡ä»¶ä¸­åŠ å…¥ï¼š</p>

<pre><code class="language-objc">pod &#39;AFNetworking&#39;
</code></pre>

<p>å¹¶æ‰§è¡Œ <code>pod install</code>å°±å¯ä»¥äº†ã€‚æœ‰ä¸€ç‚¹è¦æ³¨æ„çš„æ˜¯æœ€æ–°ç‰ˆæœ¬ä¸º<code>3.1</code>è¿™ä¸ªç‰ˆæœ¬åˆ é™¤äº†åŸºäº<code>NSURLConnectionOperation</code>çš„<code>AFHTTPRequestOperationManager</code>çš„æ”¯æŒã€‚è½¬è€Œä½¿ç”¨åŸºäº<code>NSURLSession</code>å°è£…çš„<code>AFHTTPSessionManager</code>ã€‚</p>

<h2 id="toc_2">ç½‘ç»œç›‘å¬</h2>

<p><code>AFNetworking</code>æä¾›äº†ä¸€ä¸ªç›‘å¬ç½‘ç»œçŠ¶æ€çš„æ–¹æ³•ï¼Œæ¥å®æ—¶çš„åˆ¤æ–­å½“å‰ç½‘ç»œæ˜¯å¦è‰¯å¥½ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code class="language-objc">// å¦‚æœè¦æ£€æµ‹ç½‘ç»œçŠ¶æ€çš„å˜åŒ–,å¿…é¡»ç”¨æ£€æµ‹ç®¡ç†å™¨çš„å•ä¾‹çš„startMonitoring
    /**
     AFNetworkReachabilityStatusUnknown          = -1,  // æœªçŸ¥
     AFNetworkReachabilityStatusNotReachable     = 0,   // æ— è¿æ¥
     AFNetworkReachabilityStatusReachableViaWWAN = 1,   // 3G èŠ±é’±
     AFNetworkReachabilityStatusReachableViaWiFi = 2,   // å±€åŸŸç½‘ç»œ,ä¸èŠ±é’±
     */
    [[AFNetworkReachabilityManager sharedManager] startMonitoring];
    [[AFNetworkReachabilityManager sharedManager] setReachabilityStatusChangeBlock:^(AFNetworkReachabilityStatus status) {
        debugLog(@&quot;%ld&quot;,(long)status);
    }];
</code></pre>

<p>æ ¹æ®å½“å‰ç½‘ç»œçŠ¶æ€ä¼šè¾“å‡ºæ‰€å¯¹åº”çš„çŠ¶æ€æ•°å€¼ã€‚</p>

<h2 id="toc_3">ä¸‹è½½</h2>

<pre><code class="language-objc">    //sessionçš„é»˜è®¤é…ç½®
    NSURLSessionConfiguration *configuration = [NSURLSessionConfiguration defaultSessionConfiguration];
    //æ ¹æ®é…ç½®åˆ›å»ºç®¡ç†è€…
    AFURLSessionManager *manager = [[AFURLSessionManager alloc] initWithSessionConfiguration:configuration];
    NSURL *url = [NSURL URLWithString:@&quot;http://smartdsp.xmu.edu.cn/memberpdf/fuxueyang/cvpr2017/cvpr2017.pdf&quot;];
    //æ ¹æ®urlåˆ›å»ºè¯·æ±‚å¯¹è±¡
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    //åˆ›å»ºä¸‹è½½ä»»åŠ¡
    NSURLSessionDownloadTask *downloadTask = [manager downloadTaskWithRequest:request progress:nil destination:^NSURL * _Nonnull(NSURL * _Nonnull targetPath, NSURLResponse * _Nonnull response) {
        //è®¾ç½®ä¸‹è½½è·¯å¾„
        NSURL *documentsDirectoryURL = [[NSFileManager defaultManager] URLForDirectory:NSDocumentDirectory inDomain:NSUserDomainMask appropriateForURL:nil create:NO error:nil];
        //è¿”å›æ–‡ä»¶å­˜æ”¾åœ¨æœ¬åœ°çš„åœ°å€
        return [documentsDirectoryURL URLByAppendingPathComponent:[response suggestedFilename]];
    } completionHandler:^(NSURLResponse * _Nonnull response, NSURL * _Nullable filePath, NSError * _Nullable error) {
        //ä¸‹è½½å®Œæˆåè°ƒç”¨æ–¹æ³•
        debugLog(@&quot;File download to:%@ , %@&quot;,filePath,error);
    }];
    //å¼€å§‹ä¸‹è½½ä»»åŠ¡
    [downloadTask resume];
</code></pre>

<h2 id="toc_4">getè¯·æ±‚</h2>

<pre><code class="language-objc">    NSString *urlString = @&quot;https://www.weifar.com/api/ExamQuestion/id&quot;;
    NSDictionary *parameters = @{@&quot;id&quot;:@6};
    AFHTTPSessionManager *manager = [AFHTTPSessionManager manager];
    //æ ¹æ®ä¸Šè¿°å‚æ•°å’Œè¯·æ±‚åœ°å€æ¥å‘é€è¯·æ±‚
    [manager GET:urlString parameters:parameters progress:^(NSProgress * _Nonnull downloadProgress) {
        debugLog(@&quot;%@&quot;,downloadProgress);
    } success:^(NSURLSessionDataTask * _Nonnull task, id  _Nullable responseObject) {
        //æˆåŠŸè·å–æ•°æ®åï¼Œè¿›è¡Œå¤„ç†
        if (responseObject) {
            NSArray *a = responseObject[@&quot;Questions&quot;];
            NSDictionary *dic = a[0];
            NSString *str = dic[@&quot;BlockDescription&quot;];
            debugLog(@&quot;%@&quot;,str);
        }
    } failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) {
        //è¯·æ±‚å¤±è´¥ï¼Œæ‰“å°é”™è¯¯
        debugLog(@&quot;%@&quot;,error);
    }];
</code></pre>

<h2 id="toc_5">æ€»ç»“</h2>

<p>ä»¥ä¸Šå°±æ˜¯<code>AFNetworking</code>çš„åŸºæœ¬ä½¿ç”¨ï¼Œè¿˜æœ‰å…¶ä»–çš„ä¸€äº›åŠŸèƒ½ç”±äºæ²¡æœ‰åˆé€‚çš„æ¥å£å¯ä»¥è¿›è¡Œæ“ä½œï¼Œæš‚ä¸”å…ˆæç½®ä¸‹ã€‚å…·ä½“çš„æ“ä½œå¯ä»¥å‚è€ƒå®˜æ–¹çš„<code>AFNetworking</code><a href="http://cocoadocs.org/docsets/AFNetworking/3.1.0/index.html">APIæ–‡æ¡£</a>,</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/11/18</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='iOS.html'>iOS</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15109022752813.html">
                
                  <h1>FMDBçš„ä½¿ç”¨æ–¹æ³•</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<ul>
<li>
<a href="#toc_0">FMDBç®€ä»‹</a>
</li>
<li>
<a href="#toc_1">ä½¿ç”¨æ–¹æ³•</a>
<ul>
<li>
<a href="#toc_2">å¼•å…¥ç›¸å…³æ–‡ä»¶</a>
</li>
<li>
<a href="#toc_3">å»ºç«‹æ•°æ®åº“</a>
</li>
<li>
<a href="#toc_4">æ‰“å¼€æ•°æ®åº“</a>
</li>
<li>
<a href="#toc_5">æ‰§è¡Œæ›´æ–°ï¼ˆupdateï¼‰æ“ä½œ</a>
</li>
<li>
<a href="#toc_6">æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ</a>
</li>
<li>
<a href="#toc_7">æ•°æ®å‚æ•°</a>
</li>
<li>
<a href="#toc_8">çº¿ç¨‹å®‰å…¨</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#toc_9">æ€»ç»“</a>


<p>æœ€è¿‘å†çœ‹å…¶å®ƒå¤§ç‰›å†™çš„é¡¹ç›®ä»£ç ï¼Œå‘ç°è®¸å¤šç”¨åˆ°äº†<code>FMDB</code>ï¼Œæ‰€ä»¥å»äº†è§£äº†ä¸€ä¸‹ã€‚</p>

<h2 id="toc_0">FMDBç®€ä»‹</h2>

<p>FMDBæ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„å¼€æºåº“ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>cocopods</code>æœç´¢å¹¶æ•´åˆåˆ°é¡¹ç›®é‡Œé¢ï¼ŒFMDBå…¶å®å°±æ˜¯å¯¹<code>SQLite</code>çš„<code>API</code>è¿›è¡Œäº†å°è£…ï¼ŒåŠ ä¸Šäº†é¢å‘å¯¹è±¡çš„æ€æƒ³ï¼Œè®©æˆ‘ä»¬ä¸å¿…ä½¿ç”¨ç¹ççš„<code>C</code>è¯­è¨€<code>API</code>å‡½æ•°ï¼Œæ¯”èµ·ç›´æ¥æ“ä½œ<code>SQLite</code>æ›´åŠ æ–¹ä¾¿ã€‚</p>

<p>å¹¶ä¸”<code>FMDB</code> åŒæ—¶å…¼å®¹ <code>ARC</code> å’Œé <code>ARC</code> å·¥ç¨‹ï¼Œä¼šè‡ªåŠ¨æ ¹æ®å·¥ç¨‹é…ç½®æ¥è°ƒæ•´ç›¸å…³çš„å†…å­˜ç®¡ç†ä»£ç ã€‚</p>

<h2 id="toc_1">ä½¿ç”¨æ–¹æ³•</h2>

<p>æœ¬æ–‡ä½¿ç”¨æ–¹æ³•ï¼Œå‡å‚è€ƒ<code>FMDB</code>çš„<code>github</code>é¡¹ç›®æ–‡æ¡£<a href="https://github.com/ccgus/fmdb">https://github.com/ccgus/fmdb</a></p>

<h3 id="toc_2">å¼•å…¥ç›¸å…³æ–‡ä»¶</h3>

<p>å› ä¸ºæ˜¯å¯¹<code>sqlite</code>çš„å°è£…æ‰€ä»¥æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­éœ€è¦å¼•å…¥å®ƒçš„åº“ã€‚<br/>
<img src="media/15109022752813/15109026776351.jpg" alt=""/></p>

<p>ä¹‹ååœ¨æ–‡ä»¶ä¸­å¯¼å…¥å®ƒçš„å¤´æ–‡ä»¶ï¼š</p>

<pre><code class="language-objc">#import &quot;FMDB.h&quot;
</code></pre>

<h3 id="toc_3">å»ºç«‹æ•°æ®åº“</h3>

<p>å»ºç«‹æ•°æ®åº“åªæœ‰ç®€å•çš„ä¸€å¥ä»£ç ï¼Œå¦‚æœå½“å‰è·¯å¾„ä¸å­˜åœ¨æ‰€éœ€çš„æ•°æ®åº“åˆ™ä¼šè‡ªåŠ¨åˆ›å»ºï¼Œè‹¥å­˜åœ¨åˆ™ä¼šè·å–åˆ°ã€‚å½“è·¯å¾„ä¸ºå­—ç¬¦ï¼ˆ<code>@â€œâ€</code>ï¼‰æ—¶ï¼Œä¸€ä¸ªç©ºçš„æ•°æ®åº“å°†è¢«åˆ›å»ºåœ¨ä¸´æ—¶çš„ä½ç½®ï¼Œæ•°æ®åº“å…³é—­æ—¶å€™å°†è¢«è‡ªåŠ¨åˆ é™¤ã€‚è·¯å¾„ä¸º<code>NULL</code>æ—¶ç©ºæ•°æ®åº“ä¼šè¢«æ”¾åœ¨å†…å­˜ä¸­ï¼Œå…³é—­æ—¶ä¹Ÿå°†è‡ªåŠ¨è¢«åˆ é™¤ã€‚å…·ä½“ä¿¡æ¯å¯ä»¥å‚è§ï¼š<a href="http://www.sqlite.org/inmemorydb.html">http://www.sqlite.org/inmemorydb.html</a></p>

<pre><code class="language-objc">#define PATH_OF_DOCUMENT    [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]

_path = [PATH_OF_DOCUMENT stringByAppendingPathComponent:@&quot;test.db&quot;];
//åˆ›å»ºæ•°æ®åº“
FMDatabase *db = [FMDatabase databaseWithPath:_path];
</code></pre>

<h3 id="toc_4">æ‰“å¼€æ•°æ®åº“</h3>

<p>åœ¨å¯¹æ•°æ®åº“è¿›è¡Œäº¤äº’æ—¶ï¼Œå¿…é¡»è¦å…ˆæ‰“å¼€å®ƒã€‚å¦‚æœæ‰“å¼€å¤±è´¥ï¼Œå¯èƒ½æ˜¯æƒé™ä¸è¶³æˆ–è€…èµ„æºä¸è¶³ã€‚</p>

<pre><code class="language-objc">if (![db open]) {
    // [db release];   // uncomment this line in manual referencing code; in ARC, this is not necessary/permitted
    db = nil;
    return;
}
</code></pre>

<h3 id="toc_5">æ‰§è¡Œæ›´æ–°ï¼ˆupdateï¼‰æ“ä½œ</h3>

<p>FMDBä¸­é™¤äº†<code>select</code>ä¸ºæŸ¥è¯¢ï¼ˆ<code>query</code>ï¼‰ä»¥ä¸ºéƒ½ä¸ºæ›´æ–°æ“ä½œã€‚</p>

<p>ä¾‹å¦‚æˆ‘ä»¬æ‰§è¡Œä¸€ä¸ª<strong>æ’å…¥</strong>æ“ä½œçš„å®Œæ•´æ­¥éª¤ä¸ºï¼š</p>

<pre><code class="language-objc">    static int idx = 1;
    FMDatabase *db = [FMDatabase databaseWithPath:_path];
    if ([db open]) {
        NSString * sql = @&quot;insert into User (name, password) values(?, ?) &quot;;
        NSString *name = [NSString stringWithFormat:@&quot;lzh%d&quot;,idx++];
        BOOL result = [db executeUpdate:sql,name,@&quot;op&quot;];
        if (!result) {
            debugLog(@&quot;error to insert data&quot;);
        }else{
            debugLog(@&quot;succ to insert data&quot;);
        }
        [db close];
    }
</code></pre>

<p><strong>æŸ¥è¯¢</strong>æ“ä½œï¼š</p>

<pre><code class="language-objc">    FMDatabase *db = [FMDatabase databaseWithPath:_path];
    if ([db open]) {
        NSString *sql =@&quot;select * from User&quot;;
        FMResultSet *result = [db executeQuery:sql];
        while ([result next]) {
            int userId = [result intForColumn:@&quot;id&quot;];
            NSString *name = [result stringForColumn:@&quot;name&quot;];
            NSString *pass = [result stringForColumn:@&quot;password&quot;];
            debugLog(@&quot;user id = %d, name = %@, pass = %@&quot;, userId, name, pass);
        }
        [db close];
    }
</code></pre>

<p><strong>åˆ é™¤</strong>æ“ä½œï¼š</p>

<pre><code class="language-objc">    static int idx = 1;
    FMDatabase *db =[FMDatabase databaseWithPath:_path];
    if ([db open]) {
        NSString *sql = @&quot;delete from User where id = ?&quot;;
        BOOL result = [db executeUpdate:sql , @(idx++)];
        if (!result) {
            debugLog(@&quot;error to delete db data&quot;);
        } else {
            debugLog(@&quot;succ to deleta db data&quot;);
        }
        [db close];
    }
</code></pre>

<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰§è¡Œ<code>sql</code>è¯­å¥çš„æ—¶å€™ç”¨çš„éƒ½æ˜¯<code>executeUpdateï¼š</code>æ–¹æ³•ã€‚</p>

<h3 id="toc_6">æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ</h3>

<p>æŸ¥è¯¢æ“ä½œä¸ä¸Šé¢çš„æœ‰ç‚¹åŒºåˆ«ï¼Œæˆ‘ä»¬éœ€è¦ç”¨<code>FMResultSet</code>æ¥å­˜å‚¨æˆ‘ä»¬çš„æŸ¥è¯¢ç»“æœï¼Œå¹¶è°ƒç”¨å®ƒçš„<code>nextï¼š</code>æ–¹æ³•æ¥å¯¹æ•°æ®è¿›è¡Œé€è¡Œæ“ä½œï¼š</p>

<pre><code class="language-objc">    FMDatabase *db = [FMDatabase databaseWithPath:_path];
    if ([db open]) {
        NSString *sql =@&quot;select * from User&quot;;
        FMResultSet *result = [db executeQuery:sql];
        while ([result next]) {
            int userId = [result intForColumn:@&quot;id&quot;];
            NSString *name = [result stringForColumn:@&quot;name&quot;];
            NSString *pass = [result stringForColumn:@&quot;password&quot;];
            debugLog(@&quot;user id = %d, name = %@, pass = %@&quot;, userId, name, pass);
        }
        [db close];
    }
</code></pre>

<p>ä¸Šé¢ä»£ç å¯ä»¥å‘ç°æ‰§è¡Œ<code>sql</code>è¯­å¥å˜ä¸º<code>executeQuery:</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šå°†ç»“æœè¿”å›ä¸º<code>FMResultSet</code>ç±»å‹ï¼Œä¹‹åæˆ‘ä»¬éœ€è¦è°ƒç”¨<code>stringForColumn:</code>å¯¹ç»“æœè¿›è¡Œè§£æã€‚<br/>
<code>FMDB</code>æä¾›å¦‚ä¸‹å¤šä¸ªæ–¹æ³•æ¥è·å–ä¸åŒç±»å‹çš„æ•°æ®ï¼š</p>

<pre><code class="language-objc">intForColumn:
longForColumn:
longLongIntForColumn:
boolForColumn:
doubleForColumn:
stringForColumn:
dateForColumn:
dataForColumn:
dataNoCopyForColumn:
UTF8StringForColumn:
objectForColumn:
</code></pre>

<p>ä¹Ÿå¯ä»¥æŒ‰ç…§åˆ—çš„ç´¢å¼•å¯¹æ•°æ®è¿›è¡Œè·å–ï¼Œ<code>{type}ForColumnIndex:</code></p>

<h3 id="toc_7">æ•°æ®å‚æ•°</h3>

<p>æˆ‘ä»¬å¯ä»¥åœ¨<code>sql</code>è¯­å¥ä¸­ï¼Œç”¨<code>ï¼Ÿ</code>è¡¨ç¤ºæ‰§è¡Œè¯­å¥çš„å‚æ•°ï¼Œç„¶ååœ¨ <code>executeUpdateï¼š</code>æ–¹æ³•æ¥å°†<code>?</code>æ‰€æŒ‡ä»£çš„å…·ä½“å‚æ•°ä¼ å…¥ï¼Œä¾‹å¦‚ä¸Šé¢çš„ä»£ç ï¼š</p>

<pre><code class="language-objc">    NSString * sql = @&quot;insert into User (name, password) values(?, ?) &quot;;
    NSString *name = [NSString stringWithFormat:@&quot;lzh%d&quot;,idx++];
    BOOL result = [db executeUpdate:sql,name,@&quot;op&quot;];
</code></pre>

<h3 id="toc_8">çº¿ç¨‹å®‰å…¨</h3>

<p><code>FMDatabase</code>è¿™ä¸ªç±»æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œå¦‚æœåœ¨å¤šä¸ªçº¿ç¨‹åŒæ—¶ä½¿ç”¨ä¸€ä¸ª<code>FMDatabase</code>å®ä¾‹ï¼Œä¼šé€ æˆæ•°æ®æ··ä¹±é—®é¢˜ã€‚æ‰€ä»¥ï¼Œæä¾›äº†ä¸€ä¸ª<code>FMDatabaseQueue</code>å¹¶ä¸”ä½¿ç”¨å®ƒæ¥å¯¹å¤šä¸ªçº¿ç¨‹é—´è¿›è¡Œäº¤äº’ï¼Œ<code>FMDatabaseQueue</code>å¯¹è±¡å°†é€šè¿‡æ¥å…¥å¤šä¸ªçº¿ç¨‹è¿›è¡ŒåŒæ­¥å’Œæ•´åˆã€‚</p>

<p>ä½¿ç”¨çš„æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼š</p>

<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ•°æ®åº“<code>path</code>æ¥åˆå§‹åŒ–<code>FMDatabaseQueue</code>ï¼Œç„¶åå°±å¯ä»¥å°†ä¸€ä¸ªé—­åŒ… (block) ä¼ å…¥ <code>inDatabase</code> æ–¹æ³•ä¸­ã€‚</p>

<pre><code class="language-objc">
FMDatabaseQueue *queue = [FMDatabaseQueue databaseQueueWithPath:aPath];

[queue inDatabase:^(FMDatabase *db) {
    [db executeUpdate:@&quot;INSERT INTO myTable VALUES (?)&quot;, @1];
    [db executeUpdate:@&quot;INSERT INTO myTable VALUES (?)&quot;, @2];
    [db executeUpdate:@&quot;INSERT INTO myTable VALUES (?)&quot;, @3];

    FMResultSet *rs = [db executeQuery:@&quot;select * from foo&quot;];
    while ([rs next]) {
        â€¦
    }
}];
</code></pre>

<p>æŒ‰ç…§ä¸Šé¢çš„æ–¹æ³•æˆ‘ä»¬å¯ä»¥åˆ›å»ºå¤šä¸ªçº¿ç¨‹æ¥å¼‚æ­¥çš„å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œï¼š</p>

<pre><code class="language-objc">FMDatabaseQueue *queue = [FMDatabaseQueue databaseQueueWithPath:_path];
    dispatch_queue_t q1 = dispatch_queue_create(&quot;queue1&quot;, NULL);
    dispatch_queue_t q2 = dispatch_queue_create(&quot;queue2&quot;, NULL);
    
    dispatch_async(q1, ^{
        for (int i =1; i&lt;100; ++i) {
            [queue inDatabase:^(FMDatabase *db){
                NSString *sql = @&quot;insert into User (name, password) values(?, ?)&quot;;
                NSString *name = [NSString stringWithFormat:@&quot;queue1 %d&quot;, i];
                BOOL result = [db executeUpdate:sql,name,@&quot;opop&quot;];
                if (!result) {
                    debugLog(@&quot;error to add db data: %@&quot;, name);
                } else {
                    debugLog(@&quot;succ to add db data: %@&quot;, name);
                }
            }];
        }
    });
    dispatch_async(q2,^{
        for (int i = 0; i &lt; 100; ++i) {
            [queue inDatabase:^(FMDatabase *db) {
                NSString * sql = @&quot;insert into user (name, password) values(?, ?) &quot;;
                NSString * name = [NSString stringWithFormat:@&quot;queue2 %d&quot;, i];
                BOOL result = [db executeUpdate:sql, name, @&quot;opop22&quot;];
                if (!result) {
                    debugLog(@&quot;error to add db data: %@&quot;, name);
                } else {
                    debugLog(@&quot;succ to add db data: %@&quot;, name);
                }
            }];
        }
    });
</code></pre>

<p>æ‰§è¡Œåå¯ä»¥å‘ç°æ•°æ®åº“ä¸­çš„éƒ¨åˆ†è¡¨æ•°æ®å¦‚ä¸‹ï¼š<br/>
<img src="media/15109022752813/15109055831966.jpg" alt=""/></p>

<p>ä¸¤ä¸ªçº¿ç¨‹å¯ä»¥å¼‚æ­¥æ‰§è¡Œäº’ä¸å¹²æ‰°ã€‚</p>

<p>ä¸Šé¢æ•°æ®åº“çš„æ˜¾ç¤º ä½¿ç”¨çš„æ˜¯<code>Navicat</code>ï¼Œä¹Ÿæœ‰å…¶å®ƒçš„æ•°æ®åº“ç®¡ç†è½¯ä»¶å¯ä»¥æ˜¾ç¤ºã€‚</p>

<h1 id="toc_9">æ€»ç»“</h1>

<p><code>FMDB</code>æ˜¯ä¸€ä¸ªåœ¨<code>iOS</code>ä¸Šç®€åŒ–<code>sqlite API</code>çš„ç¬¬ä¸‰æ–¹åº“ï¼Œå¯¹<code>sqlite</code>è¿›è¡Œäº†å¾ˆæœ‰å¥½çš„å°è£…ï¼Œä¾¿äºç»´æŠ¤ä¸å¢åŠ æ•ˆç‡ã€‚</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/11/17</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='iOS.html'>iOS</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15083737124086.html">
                
                  <h1>ä½¿ç”¨RACçš„åŸºæœ¬æ“ä½œ</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<ul>
<li>
<a href="#toc_0">å¼€å§‹</a>
<ul>
<li>
<a href="#toc_1">ç±»å‹è½¬æ¢</a>
</li>
<li>
<a href="#toc_2">åˆ›å»ºæœ‰æ•ˆçš„çŠ¶æ€ä¿¡å·</a>
</li>
<li>
<a href="#toc_3">èšåˆä¿¡å·</a>
</li>
</ul>
</li>
<li>
<a href="#toc_4">å“åº”å¼çš„ç™»å½•</a>
<ul>
<li>
<a href="#toc_5">åˆ›å»ºä¿¡å·</a>
</li>
<li>
<a href="#toc_6">æ·»åŠ é™„åŠ æ“ä½œï¼ˆAdding side-effectsï¼‰</a>
</li>
</ul>
</li>
</ul>


<p>ä½œä¸ºä¸€ä¸ªiOSå¼€å‘è€…ï¼Œä½ å†™çš„æ¯ä¸€è¡Œä»£ç å‡ ä¹éƒ½æ˜¯åœ¨ç›¸åº”æŸä¸ªäº‹ä»¶ï¼Œä¾‹å¦‚æŒ‰é’®çš„ç‚¹å‡»ï¼Œæ”¶åˆ°ç½‘ç»œæ¶ˆæ¯ï¼Œå±æ€§çš„å˜åŒ–ï¼ˆé€šè¿‡KVOï¼‰æˆ–è€…ç”¨æˆ·ä½ç½®çš„å˜åŒ–ï¼ˆé€šè¿‡CoreLocationï¼‰ã€‚ä½†æ˜¯è¿™äº›äº‹ä»¶éƒ½ç”¨ä¸åŒçš„æ–¹å¼æ¥å¤„ç†ï¼Œæ¯”å¦‚actionã€delegateã€KVOã€callbackç­‰ã€‚<code>ReactiveCocoa</code>ä¸ºäº‹ä»¶å®šä¹‰äº†ä¸€ä¸ªæ ‡å‡†æ¥å£ï¼Œä»è€Œå¯ä»¥ä½¿ç”¨ä¸€äº›åŸºæœ¬å·¥å…·æ¥æ›´å®¹æ˜“çš„è¿æ¥ã€è¿‡æ»¤å’Œç»„åˆã€‚</p>

<p>è¿™é‡Œæˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªç®€å•çš„ç™»å½•åŠŸèƒ½ç•Œé¢ï¼Œå½“è¾“å…¥çš„<code>name</code>ä¸<code>password</code>ç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸå°±è¾“å‡º<code>success</code>ã€‚</p>

<h2 id="toc_0">å¼€å§‹</h2>

<p>é¦–å…ˆæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå·¥ç¨‹èµ·åä¸º<code>FirstRAC</code>ï¼Œå¹¶åœ¨é‡Œé¢åˆ›å»º<code>podfile</code>æ–‡ä»¶ï¼š</p>

<pre><code class="language-objc">source &#39;https://github.com/CocoaPods/Specs.git&#39;

platform :ios, â€˜8.0â€™
use_frameworks!

target &#39;FirstRACâ€™ do

    pod &#39;Masonry&#39;
    pod &#39;ReactiveObjC&#39;, &#39;~&gt; 3.0.0&#39;

end
</code></pre>

<p>é¦–å…ˆæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>button</code>ï¼Œä¸¤ä¸ª<code>Label</code>å’Œ<code>textField</code>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br/>
<img src="media/15083737124086/15083741205915.jpg" alt=""/></p>

<p>è¿™é‡Œæˆ‘ä»¬çš„ç•Œé¢å¸ƒå±€ä½¿ç”¨<code>Masonry</code>æ¥è¿›è¡Œçº¦æŸã€‚</p>

<p>ç•Œé¢å…ƒç´ çš„å±æ€§å£°æ˜ä¸ºï¼š</p>

<pre><code class="language-objc">@property(nonatomic,strong) UIView *login;
@property(nonatomic,strong) UILabel *nameLabel;
@property(nonatomic,strong) UILabel *passLabel;
@property(nonatomic,strong) UITextField *name;
@property(nonatomic,strong) UITextField *pass;
@property(nonatomic,strong) UIButton *sign;
</code></pre>

<p>å…ƒç´ çš„çº¦æŸä»¥åŠåˆ›å»ºä¸ºï¼š</p>

<pre><code class="language-objc">self.login = [[UIView alloc] initWithFrame:CGRectZero];
    
    _name = [[UITextField alloc] init];
    _name.borderStyle = UIFontWeightBold;
    _name.font = [UIFont systemFontOfSize:15];
    _name.placeholder = @&quot;Enter Name&quot;;
    [_login addSubview:_name];
    
    _pass = [[UITextField alloc] init];
    _pass.borderStyle = UIFontWeightBold;
    _pass.font = [UIFont systemFontOfSize:15];
    _pass.placeholder = @&quot;Enter Pass&quot;;
    [_login addSubview:_pass];
    
    _nameLabel = [[UILabel alloc] init];
    _nameLabel.backgroundColor = UIColor.whiteColor;
    _nameLabel.font = [UIFont systemFontOfSize:14.0];
    _nameLabel.lineBreakMode = NSLineBreakByTruncatingTail;
    _nameLabel.text = @&quot;Name&quot;;
    [_login addSubview:_nameLabel];
    
    _passLabel = [[UILabel alloc] init];
    _passLabel.backgroundColor = UIColor.whiteColor;
    _passLabel.font = [UIFont systemFontOfSize:14.0];
    _passLabel.lineBreakMode = NSLineBreakByTruncatingTail;
    _passLabel.text = @&quot;Pass&quot;;
    [_login addSubview:_passLabel];
    
    _sign = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    _sign.layer.borderWidth = 3;
//    _sign.layer.borderColor = [UIColor blueColor].CGColor;
    _sign.titleLabel.textColor = [UIColor redColor];
//    _sign.backgroundColor = [UIColor greenColor];
    [_sign setTitle:@&quot;Sign&quot; forState:UIControlStateNormal];
    [_sign setTitle:@&quot;Push&quot; forState:UIControlStateHighlighted];
    [_sign setTitleColor:UIColor.blackColor forState:UIControlStateNormal];
    _sign.showsTouchWhenHighlighted = YES;
//    [_sign addTarget:self action:@selector(buttonClick:) forControlEvents:UIControlEventTouchUpInside];
    [_login addSubview:_sign];
    [self.view addSubview:_login];

    [_login mas_makeConstraints:^(MASConstraintMaker *make){
        make.left.right.and.bottom.equalTo(self.view);
        make.top.equalTo(self.mas_topLayoutGuide).offset(@50);
    }];
    [_nameLabel mas_makeConstraints:^(MASConstraintMaker *make){
        make.top.equalTo(_login.top);
        make.height.equalTo(@20);
        make.left.equalTo(_login.left).with.offset(20);
    }];
    [_passLabel mas_makeConstraints:^(MASConstraintMaker *make){
        make.top.equalTo(_nameLabel.bottom).with.offset(10);
        make.centerX.equalTo(_nameLabel.centerX);
        make.height.equalTo(@20);
    }];
    [_name mas_makeConstraints:^(MASConstraintMaker *make){
        make.left.equalTo(_nameLabel.right).with.offset(5);
        make.centerY.equalTo(_nameLabel.centerY);
        make.height.equalTo(@20);
    }];
    [_pass mas_makeConstraints:^(MASConstraintMaker *make){
        make.left.equalTo(_passLabel.right).with.offset(5);
        make.centerY.equalTo(_passLabel.centerY);
        make.height.equalTo(@20);
    }];
    [_sign mas_makeConstraints:^(MASConstraintMaker *make){
        make.height.equalTo(@50);
        make.width.equalTo(@100);
        make.top.equalTo(_pass.bottom).offset(@50);
        make.centerX.equalTo(self.view.centerX);
    }];

</code></pre>

<p>ä¹‹åæˆ‘ä»¬è¿ç”¨<code>RAC</code>ä¸ºç•Œé¢çš„å…ƒç´ æ·»åŠ å„ç§äº‹ä»¶ï¼Œé¦–å…ˆæˆ‘ä»¬å¯ä»¥ç®€å•çš„ä¸º<code>name</code>çš„<code>textField</code>æ¥è®¢é˜…äº‹ä»¶ï¼š</p>

<pre><code class="language-objc">[[self.name.rac_textSignal
     filter:^BOOL(id value){
         NSString *text = value;
         return text.length&gt;3;
     }]
     subscribeNext:^(id x){
        NSLog(@&quot;%@&quot;,x);
    }];
</code></pre>

<p>è¯¥äº‹ä»¶å¯¹è¾“å…¥çš„æ–‡æœ¬è¿›è¡Œè¿‡æ»¤ï¼Œå°†è¾“å…¥æ–‡æœ¬çš„é•¿åº¦å¤§äº3çš„æ–‡æœ¬è½¬åŒ–æˆä¿¡å·ï¼Œä¼ é€’ç»™ä¸‹ä¸€ä¸ªè®¢é˜…äº‹ä»¶ï¼›ä¸‹ä¸€ä¸ªè®¢é˜…è€…è¾“å‡ºæ–‡æœ¬å†…å®¹ã€‚</p>

<p><font color=red>RACSignalæœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥æ¥è®¢é˜…ä¸åŒçš„äº‹ä»¶ç±»å‹ã€‚æ¯ä¸ªæ–¹æ³•éƒ½éœ€è¦è‡³å°‘ä¸€ä¸ªblockï¼Œå½“äº‹ä»¶å‘ç”Ÿæ—¶å°±ä¼šæ‰§è¡Œblockä¸­çš„é€»è¾‘ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­å¯ä»¥çœ‹åˆ°æ¯æ¬¡nextäº‹ä»¶å‘ç”Ÿæ—¶ï¼Œ<br/>
subscribeNext:æ–¹æ³•æä¾›çš„blockéƒ½ä¼šæ‰§è¡Œã€‚<br/><br/>
ReactiveCocoaæ¡†æ¶ä½¿ç”¨categoryæ¥ä¸ºå¾ˆå¤šåŸºæœ¬UIKitæ§ä»¶æ·»åŠ signalã€‚è¿™æ ·ä½ å°±èƒ½ç»™æ§ä»¶æ·»åŠ è®¢é˜…äº†ï¼Œtext fieldçš„<code>rac_textSignal</code>å°±æ˜¯è¿™ä¹ˆæ¥çš„ã€‚</font></p>

<h3 id="toc_1">ç±»å‹è½¬æ¢</h3>

<p>æˆ‘ä»¬è¿è¡Œä¸‹é¢ä»£ç å°±ä¼šå‘ç°ï¼š</p>

<pre><code class="language-objc">[[[self.pass.rac_textSignal
       map:^id(NSString *text){
           return @(text.length);
       }]
      filter:^BOOL(NSNumber *length){
          return [length integerValue]&gt;3;
      }]
     subscribeNext:^(id x){
         NSLog(@&quot;%@&quot;,x);
     }];
</code></pre>

<p>ç¼–è¯‘è¿è¡Œï¼Œä½ ä¼šå‘ç°<code>log</code>è¾“å‡ºå˜æˆäº†æ–‡æœ¬çš„é•¿åº¦è€Œä¸æ˜¯å†…å®¹ã€‚è¿™æ˜¯å› ä¸ºï¼š<font color=red>æ–°åŠ çš„mapæ“ä½œé€šè¿‡blockæ”¹å˜äº†äº‹ä»¶çš„æ•°æ®ã€‚mapä»ä¸Šä¸€ä¸ªnextäº‹ä»¶æ¥æ”¶æ•°æ®ï¼Œé€šè¿‡æ‰§è¡ŒblockæŠŠè¿”å›å€¼ä¼ ç»™ä¸‹ä¸€ä¸ªnextäº‹ä»¶ã€‚åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œmapä»¥NSStringä¸ºè¾“å…¥ï¼Œå–å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œè¿”å›ä¸€ä¸ªNSNumberã€‚</font></p>

<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br/>
<img src="media/15083737124086/15083747539689.png" alt=""/></p>

<p>èƒ½çœ‹åˆ°<code>map</code>æ“ä½œä¹‹åçš„æ­¥éª¤æ”¶åˆ°çš„éƒ½æ˜¯<code>NSNumber</code>å®ä¾‹ã€‚ä½ å¯ä»¥ä½¿ç”¨<code>map</code>æ“ä½œæ¥æŠŠæ¥æ”¶çš„æ•°æ®è½¬æ¢æˆæƒ³è¦çš„ç±»å‹ï¼Œåªè¦å®ƒæ˜¯ä¸ªå¯¹è±¡ã€‚</p>

<h3 id="toc_2">åˆ›å»ºæœ‰æ•ˆçš„çŠ¶æ€ä¿¡å·</h3>

<p>é¦–å…ˆæˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªä¿¡å·;</p>

<pre><code class="language-objc">RACSignal *validUsernameSignal =[self.name.rac_textSignal
                                     map:^id(NSString *text){
                                         return @([self isValidUsername:text]);
                                     }];
RACSignal *validPasswordSignal = [self.pass.rac_textSignal
                                      map:^id(NSString *text){
                                          return @([self isValidPassword:text]);
                                      }];

- (BOOL)isValidUsername:(NSString *)username {
    return username.length &gt; 3;
}

- (BOOL)isValidPassword:(NSString *)password {
    return password.length &gt; 3;
}
</code></pre>

<p>å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢çš„ä»£ç å¯¹æ¯ä¸ªè¾“å…¥æ¡†çš„<code>rac_textSignal</code>åº”ç”¨äº†ä¸€ä¸ªmapè½¬æ¢ã€‚è¾“å‡ºæ˜¯ä¸€ä¸ªç”¨<code>NSNumber</code>å°è£…çš„å¸ƒå°”å€¼ã€‚</p>

<p>ä¸‹ä¸€æ­¥æ˜¯è½¬æ¢è¿™äº›ä¿¡å·ï¼Œä»è€Œèƒ½ä¸ºè¾“å…¥æ¡†è®¾ç½®ä¸åŒçš„èƒŒæ™¯é¢œè‰²ã€‚åŸºæœ¬ä¸Šå°±æ˜¯ï¼Œä½ è®¢é˜…è¿™äº›ä¿¡å·ï¼Œç„¶åç”¨æ¥æ”¶åˆ°çš„å€¼æ¥æ›´æ–°è¾“å…¥æ¡†çš„èƒŒæ™¯é¢œè‰²ã€‚ä¸‹é¢æœ‰ä¸€ç§æ–¹æ³•å¾ˆæ–¹ä¾¿ï¼š</p>

<pre><code class="language-objc">    RAC(self.name , backgroundColor) = [validUsernameSignal
                                        map:^id(NSNumber *nameValid){
                                            return [nameValid boolValue] ? [UIColor clearColor]:[UIColor yellowColor];
                                        }];
    RAC(self.pass , backgroundColor) = [validPasswordSignal
                                        map:^id(NSNumber *nameValid){
                                            return [nameValid boolValue] ? [UIColor clearColor]:[UIColor yellowColor];
                                        }];
</code></pre>

<p><strong><font color=red>RACå®å…è®¸ç›´æ¥æŠŠä¿¡å·çš„è¾“å‡ºåº”ç”¨åˆ°å¯¹è±¡çš„å±æ€§ä¸Šã€‚RACå®æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯éœ€è¦è®¾ç½®å±æ€§å€¼çš„å¯¹è±¡ï¼Œç¬¬äºŒä¸ªæ˜¯å±æ€§åã€‚æ¯æ¬¡ä¿¡å·äº§ç”Ÿä¸€ä¸ªnextäº‹ä»¶ï¼Œä¼ é€’è¿‡æ¥çš„å€¼éƒ½ä¼šåº”ç”¨åˆ°è¯¥å±æ€§ä¸Šã€‚</font></strong></p>

<p><img src="media/15083737124086/15083750523260.png" alt=""/></p>

<h3 id="toc_3">èšåˆä¿¡å·</h3>

<p>ç›®å‰åœ¨åº”ç”¨ä¸­ï¼Œç™»å½•æŒ‰é’®åªæœ‰å½“ç”¨æˆ·åå’Œå¯†ç è¾“å…¥æ¡†çš„è¾“å…¥éƒ½æœ‰æ•ˆæ—¶æ‰å·¥ä½œã€‚ç°åœ¨è¦æŠŠè¿™é‡Œæ”¹æˆå“åº”å¼çš„ã€‚</p>

<p>ç°åœ¨çš„ä»£ç ä¸­å·²ç»æœ‰å¯ä»¥äº§ç”Ÿç”¨æˆ·åå’Œå¯†ç è¾“å…¥æ¡†æ˜¯å¦æœ‰æ•ˆçš„ä¿¡å·äº†â€”â€”<code>validUsernameSignal</code>å’Œ<code>validPasswordSignal</code>äº†ã€‚ç°åœ¨éœ€è¦åšçš„å°±æ˜¯èšåˆè¿™ä¸¤ä¸ªä¿¡å·æ¥å†³å®šç™»å½•æŒ‰é’®æ˜¯å¦å¯ç”¨ã€‚</p>

<p>æŠŠä¸‹é¢çš„ä»£ç æ·»åŠ åˆ°<code>viewDidLoad</code>çš„æœ«å°¾ï¼š</p>

<pre><code class="language-objc">RACSignal *signUpActiveSignal = [RACSignal combineLatest:@[validUsernameSignal,validPasswordSignal] reduce:^id(NSNumber *usernameValid, NSNumber *passwordValid){
        return @([usernameValid boolValue]&amp;&amp;[passwordValid boolValue]);
    }];
</code></pre>

<p><strong><font color=red>ä¸Šé¢çš„ä»£ç ä½¿ç”¨combineLatest:reduce:æ–¹æ³•æŠŠvalidUsernameSignalå’ŒvalidPasswordSignaläº§ç”Ÿçš„æœ€æ–°çš„å€¼èšåˆåœ¨ä¸€èµ·ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæ–°çš„ä¿¡å·ã€‚æ¯æ¬¡è¿™ä¸¤ä¸ªæºä¿¡å·çš„ä»»ä½•ä¸€ä¸ªäº§ç”Ÿæ–°å€¼æ—¶ï¼Œreduce blockéƒ½ä¼šæ‰§è¡Œï¼Œblockçš„è¿”å›å€¼ä¼šå‘ç»™ä¸‹ä¸€ä¸ªä¿¡å·ã€‚</font></strong></p>

<p><em>æ³¨æ„ï¼šRACsignalçš„è¿™ä¸ªæ–¹æ³•å¯ä»¥èšåˆä»»æ„æ•°é‡çš„ä¿¡å·ï¼Œreduce blockçš„å‚æ•°å’Œæ¯ä¸ªæºä¿¡å·ç›¸å…³ã€‚ReactiveCocoaæœ‰ä¸€ä¸ªå·¥å…·ç±»RACBlockTrampolineï¼Œå®ƒåœ¨å†…éƒ¨å¤„ç†reduce blockçš„å¯å˜å‚æ•°ã€‚å®é™…ä¸Šåœ¨ReactiveCocoaçš„å®ç°ä¸­æœ‰å¾ˆå¤šéšè—çš„æŠ€å·§ï¼Œå€¼å¾—ä½ å»çœ‹çœ‹ã€‚</em></p>

<p>ç°åœ¨æˆ‘ä»¬çš„é€»è¾‘å˜ä¸ºï¼š<img src="media/15083737124086/15083753306027.png" alt=""/></p>

<p>ä¸Šå›¾å±•ç¤ºäº†ä¸€äº›é‡è¦çš„æ¦‚å¿µï¼Œä½ å¯ä»¥ä½¿ç”¨<code>ReactiveCocoa</code>æ¥å®Œæˆä¸€äº›é‡é‡çº§çš„ä»»åŠ¡ã€‚   </p>

<ul>
<li><p>åˆ†å‰²â€”â€”ä¿¡å·å¯ä»¥æœ‰å¾ˆå¤š<code>subscriber</code>ï¼Œä¹Ÿå°±æ˜¯ä½œä¸ºå¾ˆå¤šåç»­æ­¥éª¤çš„æºã€‚æ³¨æ„ä¸Šå›¾ä¸­é‚£ä¸ªç”¨æ¥è¡¨ç¤ºç”¨æˆ·åå’Œå¯†ç æœ‰æ•ˆæ€§çš„å¸ƒå°”ä¿¡å·ï¼Œå®ƒè¢«åˆ†å‰²æˆå¤šä¸ªï¼Œç”¨äºä¸åŒçš„åœ°æ–¹ã€‚</p></li>
<li><p>èšåˆâ€”â€”å¤šä¸ªä¿¡å·å¯ä»¥èšåˆæˆä¸€ä¸ªæ–°çš„ä¿¡å·ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œä¸¤ä¸ªå¸ƒå°”ä¿¡å·èšåˆæˆäº†ä¸€ä¸ªã€‚å®é™…ä¸Šä½ å¯ä»¥èšåˆå¹¶äº§ç”Ÿä»»ä½•ç±»å‹çš„ä¿¡å·ã€‚</p></li>
</ul>

<p><strong><mark>è¿™äº›æ”¹åŠ¨çš„ç»“æœå°±æ˜¯ï¼Œä»£ç ä¸­æ²¡æœ‰ç”¨æ¥è¡¨ç¤ºä¸¤ä¸ªè¾“å…¥æ¡†æœ‰æ•ˆçŠ¶æ€çš„ç§æœ‰å±æ€§äº†ã€‚è¿™å°±æ˜¯ç”¨å“åº”å¼ç¼–ç¨‹çš„ä¸€ä¸ªå…³é”®åŒºåˆ«ï¼Œä½ ä¸éœ€è¦ä½¿ç”¨å®ä¾‹å˜é‡æ¥è¿½è¸ªç¬æ—¶çŠ¶æ€ã€‚</mark></strong></p>

<h2 id="toc_4">å“åº”å¼çš„ç™»å½•</h2>

<p>åº”ç”¨ç›®å‰ä½¿ç”¨ä¸Šé¢å›¾ä¸­å±•ç¤ºçš„å“åº”å¼ç®¡é“æ¥ç®¡ç†è¾“å…¥æ¡†å’ŒæŒ‰é’®çš„çŠ¶æ€ã€‚ä½†æ˜¯æŒ‰é’®æŒ‰ä¸‹çš„å¤„ç†ç”¨çš„è¿˜æ˜¯<code>action</code>ï¼Œæ‰€ä»¥ä¸‹ä¸€æ­¥å°±æ˜¯æŠŠå‰©ä¸‹çš„é€»è¾‘éƒ½æ›¿æ¢æˆå“åº”å¼çš„ã€‚</p>

<p>ä½ å·²ç»çŸ¥é“äº†<code>ReactiveCocoa</code>æ¡†æ¶æ˜¯å¦‚ä½•ç»™åŸºæœ¬<code>UIKit</code>æ§ä»¶æ·»åŠ å±æ€§å’Œæ–¹æ³•çš„äº†ã€‚ç›®å‰ä½ å·²ç»ä½¿ç”¨äº†<code>rac_textSignal</code>ï¼Œå®ƒä¼šåœ¨æ–‡æœ¬å‘ç”Ÿå˜åŒ–æ—¶äº§ç”Ÿä¿¡å·ã€‚ä¸ºäº†å¤„ç†æŒ‰é’®çš„äº‹ä»¶ï¼Œç°åœ¨éœ€è¦ç”¨åˆ°<code>ReactiveCocoa</code>ä¸º<code>UIKit</code>æ·»åŠ çš„å¦ä¸€ä¸ªæ–¹æ³•ï¼Œ<mark><code>rac_signalForControlEvents</code></mark>ã€‚</p>

<p>ç°åœ¨å›åˆ°<code>ViewController.m</code>ä¸­ï¼ŒæŠŠä¸‹é¢çš„ä»£ç æ·»åŠ åˆ°<code>viewDidLoad</code>çš„æœ«å°¾ï¼š</p>

<pre><code class="language-objc">[[self.signInButton
   rac_signalForControlEvents:UIControlEventTouchUpInside]
   subscribeNext:^(id x) {
     NSLog(@&quot;button clicked&quot;);
   }];
</code></pre>

<p>ä¸Šé¢çš„ä»£ç ä»æŒ‰é’®çš„<code>UIControlEventTouchUpInside</code>äº‹ä»¶åˆ›å»ºäº†ä¸€ä¸ªä¿¡å·ï¼Œç„¶åæ·»åŠ äº†ä¸€ä¸ªè®¢é˜…ï¼Œåœ¨æ¯æ¬¡äº‹ä»¶å‘ç”Ÿæ—¶éƒ½ä¼šè¾“å‡º<code>log</code>ã€‚<br/>
ä½ å°±ä¼šå‘ç°æ¯æ¬¡ç‚¹å‡»æŒ‰é’®åï¼Œå°±ä¼šå“åº”è¾“å‡ºäº‹ä»¶ï¼Œè¾“å‡º<code>button clicked</code>ã€‚</p>

<p>ç°åœ¨æŒ‰é’®æœ‰äº†ç‚¹å‡»äº‹ä»¶çš„ä¿¡å·ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯æŠŠå®ƒå’Œç™»å½•æµç¨‹è¿æ¥èµ·æ¥ã€‚ã€‚é‚£ä¹ˆé—®é¢˜å°±æ¥äº†ï¼Œæ‰“å¼€<code>RWSignInService.h</code>ï¼Œçœ‹ä¸€ä¸‹æ¥å£ï¼š</p>

<pre><code class="language-objc">//RWSignInService.h
#import &lt;Foundation/Foundation.h&gt;

typedef void (^RWSignInResponse)(BOOL);

@interface RWSignInService : NSObject
- (void)signInWithUsername:(NSString *)username
                 password:(NSString *)password
                 complete:(RWSignInResponse)completeBlock;
@end

//RWSignInService.m
#import &quot;RWSignInService.h&quot;

@implementation RWSignInService

- (void)signInWithUsername:(NSString *)username password:(NSString *)password complete:(RWSignInResponse)completeBlock {
    
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];
    double delayInSeconds = 2.0;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];
        BOOL success = [username isEqualToString:@&quot;user&quot;] &amp;&amp; [password isEqualToString:@&quot;password&quot;];
        completeBlock(success);
    });
}

@end
</code></pre>

<p>è¿™ä¸ª<code>service</code>æœ‰3ä¸ªå‚æ•°ï¼Œç”¨æˆ·åã€å¯†ç å’Œä¸€ä¸ªå®Œæˆå›è°ƒ<code>block</code>ã€‚è¿™ä¸ª<code>block</code>ä¼šåœ¨ç™»å½•æˆåŠŸæˆ–å¤±è´¥æ—¶æ‰§è¡Œã€‚ä½ å¯ä»¥åœ¨æŒ‰é’®ç‚¹å‡»äº‹ä»¶çš„<code>subscribeNext: blcok</code>é‡Œç›´æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p>

<p><em>æ³¨æ„ï¼šæœ¬æ•™ç¨‹ä¸ºäº†ç®€ä¾¿ä½¿ç”¨äº†ä¸€ä¸ªå‡çš„serviceï¼Œæ‰€ä»¥å®ƒä¸ä¾èµ–ä»»ä½•å¤–éƒ¨APIã€‚ä½†ä½ ç°åœ¨çš„ç¡®é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•ä½¿ç”¨è¿™äº›ä¸æ˜¯ç”¨ä¿¡å·è¡¨ç¤ºçš„APIå‘¢ï¼Ÿ</em></p>

<h3 id="toc_5">åˆ›å»ºä¿¡å·</h3>

<p><mark>å¹¸è¿çš„æ˜¯ï¼ŒæŠŠå·²æœ‰çš„å¼‚æ­¥APIç”¨ä¿¡å·çš„æ–¹å¼æ¥è¡¨ç¤ºç›¸å½“ç®€å•ã€‚</mark>ï¼Œè¿˜æ˜¯åœ¨<code>ViewController.m</code>ä¸­ï¼Œæ·»åŠ ä¸‹é¢çš„æ–¹æ³•ï¼š</p>

<pre><code class="language-objc">-(RACSignal *)signInSignal{
    return [RACSignal createSignal:^RACDisposable *(id subscriber){
        [self.signInService signInWithUsername:self.name.text password:self.pass.text complete:^(BOOL success){
            [subscriber sendNext:@(success)];
            [subscriber sendCompleted];
        }];
        return nil;
    }];
}
</code></pre>

<p>ä¸Šé¢çš„æ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ªä¿¡å·ï¼Œä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç ç™»å½•ã€‚ç°åœ¨åˆ†è§£æ¥çœ‹ä¸€ä¸‹ã€‚</p>

<p>ä¸Šé¢çš„ä»£ç ä½¿ç”¨<code>RACSignal</code>çš„<code>createSignal:</code>æ–¹æ³•æ¥åˆ›å»ºä¿¡å·ã€‚æ–¹æ³•çš„å…¥å‚æ˜¯ä¸€ä¸ª<code>block</code>ï¼Œè¿™ä¸ª<code>block</code>æè¿°äº†è¿™ä¸ªä¿¡å·ã€‚å½“è¿™ä¸ªä¿¡å·æœ‰<code>subscriber</code>æ—¶ï¼Œ<code>block</code>é‡Œçš„ä»£ç å°±ä¼šæ‰§è¡Œã€‚</p>

<p><code>block</code>çš„å…¥å‚æ˜¯ä¸€ä¸ª<code>subscriber</code>å®ä¾‹ï¼Œå®ƒéµå¾ª<code>RACSubscriber</code>åè®®ï¼Œåè®®é‡Œæœ‰ä¸€äº›æ–¹æ³•æ¥äº§ç”Ÿäº‹ä»¶ï¼Œä½ å¯ä»¥å‘é€ä»»æ„æ•°é‡çš„<code>next</code>äº‹ä»¶ï¼Œæˆ–è€…ç”¨<code>error\complete</code>äº‹ä»¶æ¥ç»ˆæ­¢ã€‚æœ¬ä¾‹ä¸­ï¼Œä¿¡å·å‘é€äº†ä¸€ä¸ª<code>next</code>äº‹ä»¶æ¥è¡¨ç¤ºç™»å½•æ˜¯å¦æˆåŠŸï¼Œéšåæ˜¯ä¸€ä¸ª<code>complete</code>äº‹ä»¶ã€‚</p>

<p>è¿™ä¸ª<code>block</code>çš„è¿”å›å€¼æ˜¯ä¸€ä¸ª<code>RACDisposable</code>å¯¹è±¡ï¼Œå®ƒå…è®¸ä½ åœ¨ä¸€ä¸ªè®¢é˜…è¢«å–æ¶ˆæ—¶æ‰§è¡Œä¸€äº›æ¸…ç†å·¥ä½œã€‚å½“å‰çš„ä¿¡å·ä¸éœ€è¦æ‰§è¡Œæ¸…ç†æ“ä½œï¼Œæ‰€ä»¥è¿”å›<code>nil</code>å°±å¯ä»¥äº†ã€‚</p>

<p>å¯ä»¥çœ‹åˆ°ï¼ŒæŠŠä¸€ä¸ªå¼‚æ­¥<code>API</code>ç”¨ä¿¡å·å°è£…æ˜¯å¤šç®€å•ï¼</p>

<p>ç°åœ¨å°±æ¥ä½¿ç”¨è¿™ä¸ªæ–°çš„ä¿¡å·ã€‚æŠŠä¹‹å‰æ·»åŠ åœ¨<code>viewDidLoad</code>ä¸­çš„ä»£ç æ›´æ–°æˆä¸‹é¢è¿™æ ·çš„ï¼š</p>

<pre><code class="language-objc">[[[self.signInButton
   rac_signalForControlEvents:UIControlEventTouchUpInside]
   map:^id(id x){
     return[self signInSignal];
   }]
   subscribeNext:^(id x){
     NSLog(@&quot;Sign in result: %@&quot;, x);
   }];

</code></pre>

<p>ä¸Šé¢çš„ä»£ç ä½¿ç”¨<code>map</code>æ–¹æ³•ï¼ŒæŠŠæŒ‰é’®ç‚¹å‡»ä¿¡å·è½¬æ¢æˆäº†ç™»å½•ä¿¡å·ã€‚<code>subscriber</code>è¾“å‡º<code>log</code>.</p>

<p>ç¼–è¯‘è¿è¡Œï¼Œç‚¹å‡»ç™»å½•æŒ‰é’®ï¼ŒæŸ¥çœ‹<code>Xcode</code>çš„æ§åˆ¶å°åå‘ç°è¾“å‡ºçš„æ˜¯ä¸€ä¸ªä¿¡å·å®ä¾‹ï¼Œæ²¡é”™ï¼Œä½ å·²ç»ç»™<code>subscribeNext:</code>çš„<code>block</code>ä¼ å…¥äº†ä¸€ä¸ªä¿¡å·ï¼Œä½†ä¼ å…¥çš„ä¸æ˜¯ç™»å½•ç»“æœçš„ä¿¡å·ã€‚<br/>
<img src="media/15083737124086/15083764662317.png" alt=""/></p>

<p>å½“ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œ<code>rac_signalForControlEvents</code>å‘é€äº†ä¸€ä¸ª<code>next</code>äº‹ä»¶ï¼ˆäº‹ä»¶çš„dataæ˜¯UIButtonï¼‰ã€‚<code>map</code>æ“ä½œåˆ›å»ºå¹¶è¿”å›äº†ç™»å½•ä¿¡å·ï¼Œè¿™æ„å‘³ç€åç»­æ­¥éª¤éƒ½ä¼šæ”¶åˆ°ä¸€ä¸ª<code>RACSignal</code>ã€‚è¿™å°±æ˜¯ä½ åœ¨<code>subscribeNext:</code>è¿™æ­¥çœ‹åˆ°çš„ã€‚</p>

<p>ä¸Šé¢é—®é¢˜çš„è§£å†³æ–¹æ³•ï¼Œæœ‰æ—¶å€™å«åšä¿¡å·ä¸­çš„ä¿¡å·ï¼Œæ¢å¥è¯è¯´å°±æ˜¯ä¸€ä¸ªå¤–éƒ¨ä¿¡å·é‡Œé¢è¿˜æœ‰ä¸€ä¸ªå†…éƒ¨ä¿¡å·ã€‚ä½ å¯ä»¥åœ¨å¤–éƒ¨ä¿¡å·çš„<code>subscribeNext:block</code>é‡Œè®¢é˜…å†…éƒ¨ä¿¡å·ã€‚ä¸è¿‡è¿™æ ·åµŒå¥—å¤ªæ··ä¹±å•¦ï¼Œè¿˜å¥½<code>ReactiveCocoa</code>å·²ç»è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>

<p>è§£å†³çš„æ–¹æ³•å¾ˆç®€å•ï¼Œåªéœ€è¦æŠŠ<code>map</code>æ“ä½œæ”¹æˆ<code>flattenMap</code>å°±å¯ä»¥äº†ï¼š</p>

<pre><code class="language-objc">[[[self.signInButton
   rac_signalForControlEvents:UIControlEventTouchUpInside]
   flattenMap:^id(id x){
     return[self signInSignal];
   }]
   subscribeNext:^(id x){
     NSLog(@&quot;Sign in result: %@&quot;, x);
   }];
</code></pre>

<p>è¿™ä¸ªæ“ä½œæŠŠæŒ‰é’®ç‚¹å‡»äº‹ä»¶è½¬æ¢ä¸ºç™»å½•ä¿¡å·ï¼ŒåŒæ—¶è¿˜ä»å†…éƒ¨ä¿¡å·å‘é€äº‹ä»¶åˆ°å¤–éƒ¨ä¿¡å·ã€‚</p>

<p>åˆ°è¿™é‡Œæˆ‘ä»¬çš„å¤§éƒ¨åˆ†å†…å®¹å°±ç»“æŸäº†ã€‚æœ€åå°±æ˜¯åœ¨<code>subscribeNext</code>æ­¥éª¤é‡Œæ·»åŠ ç™»å½•æˆåŠŸåçš„é€»è¾‘ã€‚æŠŠä»£ç æ›´æ–°æˆä¸‹é¢çš„ï¼š</p>

<pre><code class="language-objc">[[[self.sign rac_signalForControlEvents:UIControlEventTouchUpInside]
     flattenMap:^id(id x){
         return [self signInSignal];
     }]
     subscribeNext:^(NSNumber*signedIn){
         BOOL success =[signedIn boolValue];
         if(success){
             NSLog(@&quot;Success!!!&quot;);
         }
     }];
</code></pre>

<p>ä½†æ˜¯ï¼Œä½ æ³¨æ„åˆ°è¿™ä¸ªåº”ç”¨ç°åœ¨æœ‰ä¸€äº›ç”¨æˆ·ä½“éªŒä¸Šçš„å°é—®é¢˜äº†å—ï¼Ÿå½“ç™»å½•serviceæ­£åœ¨æ ¡éªŒç”¨æˆ·åå’Œå¯†ç æ—¶ï¼Œç™»å½•æŒ‰é’®åº”è¯¥æ˜¯ä¸å¯ç‚¹å‡»çš„ã€‚è¿™ä¼šé˜²æ­¢ç”¨æˆ·å¤šæ¬¡æ‰§è¡Œç™»å½•æ“ä½œã€‚</p>

<p>è¿™ä¸ªé€»è¾‘åº”è¯¥æ€ä¹ˆæ·»åŠ å‘¢ï¼Ÿæ”¹å˜æŒ‰é’®çš„å¯ç”¨çŠ¶æ€å¹¶ä¸æ˜¯è½¬æ¢ï¼ˆmapï¼‰ã€è¿‡æ»¤ï¼ˆfilterï¼‰æˆ–è€…å…¶ä»–å·²ç»å­¦è¿‡çš„æ¦‚å¿µã€‚å…¶å®è¿™ä¸ªå°±å«åšâ€œå‰¯ä½œç”¨â€ï¼Œæ¢å¥è¯è¯´å°±æ˜¯åœ¨ä¸€ä¸ª<code>next</code>äº‹ä»¶å‘ç”Ÿæ—¶æ‰§è¡Œçš„é€»è¾‘ï¼Œè€Œè¯¥é€»è¾‘å¹¶ä¸æ”¹å˜äº‹ä»¶æœ¬èº«ã€‚</p>

<h3 id="toc_6">æ·»åŠ é™„åŠ æ“ä½œï¼ˆAdding side-effectsï¼‰</h3>

<p>æŠŠä»£ç æ›´æ–°æˆä¸‹é¢çš„ï¼š</p>

<pre><code class="language-objc">[[[[self.sign rac_signalForControlEvents:UIControlEventTouchUpInside]
       doNext:^(id x){
           self.sign.enabled = NO;
       }]
     flattenMap:^id(id x){
         return [self signInSignal];
     }]
     subscribeNext:^(NSNumber*signedIn){
         BOOL success =[signedIn boolValue];
         if(success){
             NSLog(@&quot;Success!!!&quot;);
         }
     }];
</code></pre>

<p>ä½ å¯ä»¥çœ‹åˆ°<code>doNext:</code>æ˜¯ç›´æ¥è·Ÿåœ¨æŒ‰é’®ç‚¹å‡»äº‹ä»¶çš„åé¢ã€‚è€Œä¸”<code>doNext: block</code>å¹¶æ²¡æœ‰è¿”å›å€¼ã€‚å› ä¸ºå®ƒæ˜¯é™„åŠ æ“ä½œï¼Œå¹¶ä¸æ”¹å˜äº‹ä»¶æœ¬èº«ã€‚</p>

<p>ä¸Šé¢çš„<code>doNext: block</code>æŠŠæŒ‰é’®ç½®ä¸ºä¸å¯ç‚¹å‡»ï¼Œéšè—ç™»å½•å¤±è´¥æç¤ºã€‚ç„¶ååœ¨<code>subscribeNext: block</code>é‡Œé‡æ–°æŠŠæŒ‰é’®ç½®ä¸ºå¯ç‚¹å‡»ï¼Œå¹¶æ ¹æ®ç™»å½•ç»“æœæ¥å†³å®šæ˜¯å¦æ˜¾ç¤ºå¤±è´¥æç¤ºã€‚</p>

<p>ä¹‹å‰çš„ç®¡é“å›¾å°±æ›´æ–°æˆä¸‹é¢è¿™æ ·çš„ï¼š<br/>
<img src="media/15083737124086/15083777066162.png" alt=""/></p>

<p>ç°åœ¨æ‰€æœ‰çš„å·¥ä½œéƒ½å·²ç»å®Œæˆäº†ï¼Œè¿™ä¸ªåº”ç”¨å·²ç»æ˜¯å“åº”å¼çš„å•¦!!</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/10/19</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='iOS.html'>iOS</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
              


			<div class="row">
			  <div class="large-6 columns">
			  <p class="text-left" style="padding-top:25px;">
			   
			  </p>
			  </div>
			  <div class="large-6 columns">
			<p class="text-right" style="padding-top:25px;">
			 <a href="iOS_1.html">&raquo; Next Page</a> 
			</p>
			  </div>
			</div>
		</div>
	</div><!-- large 8 -->

 <div class="large-4 medium-4 columns">
  <div class="hide-for-small">
    <div id="sidebar" class="sidebar">
          <div id="site-info" class="site-info">
            
                <div class="site-a-logo"><img src="/asset/img/logn.png" /></div>
            
                <h1>LZH007</h1>
                <div class="site-des">LZHçš„æŠ€æœ¯æ‚äº‹å°åšå®¢~</div>
                <div class="social">









<a target="_blank" class="github" target="_blank" href="https://github.com/lockxmonk" title="GitHub">GitHub</a>
<a target="_blank" class="email" href="mailto:lzhabc007@163.com" title="Email">Email</a>
  <a target="_blank" class="rss" href="atom.xml" title="RSS">RSS</a>
                
              	 </div>
          	</div>

             

              <div id="site-categories" class="side-item ">
                <div class="side-header">
                  <h2>Categories</h2>
                </div>
                <div class="side-content">

      	<p class="cat-list">
        
            <a href="MAC%20OS.html"><strong>MAC OS</strong></a>
        
            <a href="Effective%20OC2.0.html"><strong>Effective OC2.0</strong></a>
        
            <a href="%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0.html"><strong>æœºå™¨å­¦ä¹ </strong></a>
        
            <a href="%E5%9B%BE%E5%83%8F%E5%8E%BB%E9%9B%BE%E6%8A%80%E6%9C%AF.html"><strong>å›¾åƒå»é›¾æŠ€æœ¯</strong></a>
        
            <a href="iOS.html"><strong>iOS</strong></a>
        
            <a href="iOS%E4%B8%89%E6%96%B9%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0.html"><strong>iOSä¸‰æ–¹æ¡†æ¶æºç å­¦ä¹ </strong></a>
        
            <a href="%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0.html"><strong>ç®—æ³•å­¦ä¹ </strong></a>
         
        </p>


                </div>
              </div>

              <div id="site-categories" class="side-item">
                <div class="side-header">
                  <h2>Recent Posts</h2>
                </div>
                <div class="side-content">
                <ul class="posts-list">
	      
		      
			      <li class="post">
			        <a href="15391408783293.html">UIStackViewçš„ç®€å•ä½¿ç”¨ä¸ç†è§£</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15389627333795.html">UITableView-FDTemplateLayoutCellæºç å­¦ä¹ </a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15197807986881.html">2015å¹´è“æ¡¥æ¯çœèµ›C/C++ Aç»„é¢˜è§£</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15196931743279.html">2016å¹´ç¬¬ä¸ƒå±Šè“æ¡¥æ¯C/C++ç¨‹åºè®¾è®¡æœ¬ç§‘Bç»„çœèµ›</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15196116405308.html">2017ç¬¬å…«å±Šè“æ¡¥æ¯C/C++ Bç»„çœèµ›</a>
			      </li>
		     
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		   
		  		</ul>
                </div>
              </div>
          <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1265629731'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s22.cnzz.com/z_stat.php%3Fid%3D1265629731%26online%3D1' type='text/javascript'%3E%3C/script%3E"));</script>    
        </div><!-- sidebar -->
      </div><!-- hide for small -->
</div><!-- large 4 -->

</div><!-- row -->

 <div class="page-bottom clearfix">
  <div class="row">
   <p class="copyright">Copyright &copy; 2017
Powered by <a target="_blank" href="https://lockxmonk.github.io/index.html">LZH</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
</div>

        </section>
      </div>
    </div>

  
    

    <script src="asset/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      function fixSidebarHeight(){
        var w1 = $('.markdown-body').height();
          var w2 = $('#sidebar').height();
          if (w1 > w2) { $('#sidebar').height(w1); };
      }
      $(function(){
        fixSidebarHeight();
      })
      $(window).load(function(){
          fixSidebarHeight();
      });
     
    </script>

    <script src="asset/chart/all-min.js"></script><script type="text/javascript">$(function(){    var mwebii=0;    var mwebChartEleId = 'mweb-chart-ele-';    $('pre>code').each(function(){        mwebii++;        var eleiid = mwebChartEleId+mwebii;        if($(this).hasClass('language-sequence')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = Diagram.parse($(this).text());            diagram.drawSVG(eleiid,{theme: 'simple'});        }else if($(this).hasClass('language-flow')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = flowchart.parse($(this).text());            diagram.drawSVG(eleiid);        }    });});</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>


  </body>
</html>
